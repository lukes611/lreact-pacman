parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"usdw":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},t=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.modifyTree=exports.RenderDom=exports.useState=exports.Component=exports.Element=exports.LReactElement=exports._Element=void 0;var n=function(){function e(e,t,n){this.maker=e,this.props=t,this.children=n,"c"===this.maker.kind&&(this._name=this.maker.c.constructor.name)}return e.prototype.createElement=function(){var e,t,n=this;switch(this.maker.kind){case"c":this._c=null!==(e=this._c)&&void 0!==e?e:new this.maker.c(this.props),this._c.paint=function(){return f(n)},this._velem=null===(t=this._c)||void 0===t?void 0:t.render();break;case"f":c.reset(),this._velem=this.maker.f(this.props),this._useStateSysList=c.maybeGetList(function(){return f(n)}),c.reset();break;case"html":this._elem=document.createElement(this.maker.type);break;case"string":this._elem=document.createTextNode(this.maker.value)}},e.prototype.getMakerValue=function(){switch(this.maker.kind){case"c":return this.maker.c;case"f":return this.maker.f;case"html":return this.maker.type;case"string":return this.maker.value}},e.prototype.similar=function(e){return e.maker.kind===this.maker.kind&&("string"===e.maker.kind||this.getMakerValue()===e.getMakerValue()&&this.children.length===e.children.length)},e}();function r(t,r,i){void 0===r&&(r={}),void 0===i&&(i=[]);var s=i.map(function(e){return"string"==typeof e?new n({kind:"string",value:e},{},[]):e}).filter(function(e){return null!=e}),u=e(e({},r),{children:s});return"function"==typeof t?o(t)?new n({kind:"c",c:t},u,s):new n({kind:"f",f:t},u,s):"string"==typeof t?new n({kind:"html",type:t},u,s):void 0}exports._Element=n,exports.LReactElement=n,exports.Element=r;var i=function(){function t(e){this.props=e}return t.prototype.componentDidMount=function(){},t.prototype.componentDidUnmount=function(){},t.prototype.setState=function(t){var n;this.state&&(this.state=e(e({},this.state),t),null===(n=this.paint)||void 0===n||n.call(this,this))},t}();function o(e){return"function"==typeof e&&(e.prototype&&e.prototype.__isComponent)}exports.Component=i,i.prototype.__isComponent=!0;var s=function(){function e(e){this.v=e}return e.prototype.set=function(e){var t;this.v=e,null===(t=this.repaint)||void 0===t||t.call(this)},e}(),u=function(){function e(){this.mode="push",this.index=0}return e.prototype.reset=function(){this.mode="push",this.list=[],this.index=0},e.prototype.getSys=function(e){if("push"===this.mode){var t=new s(e);return this.list.push(t),t}return this.list[this.index++]},e.prototype.setupForConsumer=function(e){this.list=e,this.index=0,this.mode="pop"},e.prototype.maybeGetList=function(e){if("push"===this.mode&&this.list.length)return t(this.list).map(function(t){return t.repaint=e,t})},e}(),c=new u,l=function(e){var t=c.getSys(e);return[t.v,function(e){return t.set(e)}]};function a(e,t,n,r){var i,o=null!==(i=t?t.children:[])&&void 0!==i?i:[];if(e.children.forEach(function(e,t){n(e,o[t],t)}),t&&!(e.children.length>o.length))for(var s=e.children.length;s<o.length;s++)r(o[s],s)}function h(e,t){t.style&&Object.assign(e.style,t.style),t.onClick&&(e.onclick=function(e){return t.onClick(e)}),t.onMouseDown&&(e.onmousedown=function(e){return t.onMouseDown(e)}),t.onMouseUp&&(e.onmouseup=function(e){return t.onMouseUp(e)}),t.onTouchStart&&(e.ontouchstart=function(e){return t.onTouchStart(e)}),t.onTouchEnd&&(e.ontouchend=function(e){return t.onTouchEnd(e)}),t.onChange&&(e.oninput=function(e){return t.onChange(e)});var n=new Set(["width","height","href","id","value","type","checked"]);Object.keys(t).forEach(function(r){n.has(r)&&(e[r]=t[r])})}function m(e,t){var n=Object.keys(e),r=new Set(Object.keys(t));if(n.length!==r.size)return!1;for(var i=0,o=n;i<o.length;i++){var s=o[i];if(!r.has(s))return!1;if(e[s]!==t[s])return!1}return!0}function p(e,t){d(e,void 0,t,void 0)}function f(e){var t,n=e._velem;"c"===e.maker.kind?t=e._c.render():"f"===e.maker.kind&&(e._useStateSysList&&c.setupForConsumer(e._useStateSysList),t=e.maker.f(e.props),c.reset()),d(t,null==n?void 0:n._parent,n._dom,n),e._velem=t}function d(e,t,n,r){var i,o=e.props,s=e.maker;if(e._dom=n,r&&r.similar(e)){if("string"!==e.maker.kind||"string"!=r.maker.kind)return r._elem&&"html"===e.maker.kind?(e._elem=r._elem,m(e.props,r.props)||h(e._elem,o),void a(e,r,function(t,n,r){d(t,e,e._elem,n)},function(e,t){r._elem&&e._elem&&r._elem.removeChild(e._elem),_(e)})):r._velem?(e._c=r._c,e._c&&(e._c.props=o),e._useStateSysList=r._useStateSysList,e.createElement(),void d(e._velem,e,n,r._velem)):void 0;e._elem=r._elem,e._elem.data=e.maker.value}e.createElement(),r&&_(r),n&&e._elem?(r&&r._elem?n.replaceChild(e._elem,r._elem):n.appendChild(e._elem),e.props.ref&&e.props.ref(e._elem),"html"===s.kind&&h(e._elem,o),a(e,r,function(t,n,r){d(t,e,e._elem,void 0)},function(e,t){v(e)})):e._velem&&(r&&v(r),null===(i=e._c)||void 0===i||i.componentDidMount(),d(e._velem,e,n,void 0))}function _(e){var t;null===(t=e._c)||void 0===t||t.componentDidUnmount(),e.children.forEach(_),e._velem&&_(e._velem)}function v(e){e._dom&&e._elem&&(e._dom.removeChild(e._elem),e._elem=void 0),e._velem&&v(e._velem)}exports.useState=l,exports.RenderDom=p,exports.modifyTree=d;
},{}],"Dpgn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pt=exports.Radians2Degrees=void 0,exports.Radians2Degrees=180/Math.PI;var t=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.copy=function(){return new t(this.x,this.y)},t.prototype.toString=function(){return"<"+this.x+", "+this.y+">"},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t.prototype.ceil=function(){return new t(Math.ceil(this.x),Math.ceil(this.y))},t.prototype.round=function(){return new t(Math.round(this.x),Math.round(this.y))},t.prototype.scale=function(e){return new t(this.x*e,this.y*e)},t.prototype.addY=function(e){return new t(this.x,this.y+e)},t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t.prototype.addP=function(e){var n=e.x,r=e.y;return new t(this.x+n,this.y+r)},t.prototype.eq=function(t){return this.x===t.x&&this.y===t.y},t.prototype.dist=function(t){return this.addP(t.scale(-1)).mag()},t.fromAngle=function(e){var n=new t(0,0);return e/=exports.Radians2Degrees,n.x=Math.cos(e),n.y=Math.sin(e),n},t.prototype.getAngle=function(){var t=exports.Radians2Degrees*Math.atan(this.y/this.x);return this.x<0?t+=180:this.y<0&&(t+=360),t},t.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.unit=function(){return this.scale(1/this.mag())},t}();exports.Pt=t;
},{}],"NwnZ":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=exports.Ghost=exports.Pacman=exports.Agent=exports.Level=exports.DIRECTIONS=exports.level1=void 0;var e=require("./pt"),n="# level 1\n+-------+---------   \n|       |        |   \n|       |        |   \n|       |        |   \n|       |        |   \n+-----------+----+---\n|       |   |        \n|       |   |        \n|       |   |        \n|       |   +---+    \n|       |       |    \n|       |       |    \n|       |       |    \n+-------+   +---+---+\n        |   |       g\n        |   |       g\n        |   |       g\n        |   |       g\n        |   |       g\nt---p-------+   ggggg\n        |   |        \n        |   |        \n        |   |        \n        |   +--------\n        |   |        \n        |   |        \n+-----------+-------+\n|       |           |\n|       |           |\n|       |           |\n|       |           |\n+---+   +----+------+\n    |   |    |       \n    |   |    |       \n    |   |    |       \n+---+---+    +--+    \n|               |    \n|               |    \n|               |    \n+---------------+----\n";function i(t){return t.x?t.x<0?"left":"right":t.y<0?"up":"down"}function r(t){switch(t){case"up":return new e.Pt(0,-1);case"down":return new e.Pt(0,1);case"left":return new e.Pt(-1,0);case"right":return new e.Pt(1,0)}}exports.level1=n.split("\n").map(function(t){if(t.startsWith("#"))return t;var e=t.substring(0,t.length-1).split("").reverse().map(function(t){return"p"===t||"t"===t?"+":t}).join("");return t+e}).join("\n"),exports.DIRECTIONS=["up","down","left","right"];var o=function(){function t(t){this.level=t.split("\n").slice(1).map(function(t){return t.split("")}),this.w=this.level[0].length,this.h=this.level.length}return t.createLevel1=function(){return new t(exports.level1)},t.prototype.isPath=function(t,e){var n=this.getV(t,e);return n&&" "!==n},t.prototype.isPathP=function(t){return this.isPath(t.x,t.y)},t.prototype.getV=function(t,e){if(!(t<0||t>=this.w||e<0||e>=this.h))return this.level[e][t]},t.prototype.getLocationsOfChar=function(t){var n=[];return this.forEach(function(i,r,o){i===t&&n.push(new e.Pt(r,o))}),n},t.prototype.forEach=function(t){for(var e=0;e<this.h;e++)for(var n=0;n<this.w;n++)t(this.getV(n,e),n,e)},t.prototype.getClosestRailPoint=function(t){return t.round()},t.prototype.nearARailPoint=function(t,e){void 0===e&&(e=.08);var n=Math.abs(t.x-Math.round(t.x)),i=Math.abs(t.y-Math.round(t.y));return!(n>e||i>e)},t.prototype.isRailPoint=function(t){return t.x%1==0&&t.y%1==0},t.prototype.isSafePosition=function(t){return this.onRail(t)},t.prototype.onRail=function(t){if(this.isRailPoint(t)&&this.isPathP(t))return!0;if(t.y%1==0){var e=Math.floor(t.x),n=Math.ceil(t.x);return!(!this.isPath(e,t.y)||!this.isPath(n,t.y))}var i=Math.floor(t.y),r=Math.ceil(t.y);return!(!this.isPath(t.x,i)||!this.isPath(t.x,r))},t.prototype.onALinearPath=function(t){var e=this.getClosestRailPoint(t),n=new Map;return this.forSurroundingPoints(e,function(t,e,i){i&&" "!==i&&n.set(t,!0)}),n.get("up")&&n.get("down")&&!n.get("left")&&!n.get("right")||!n.get("up")&&!n.get("down")&&n.get("left")&&n.get("right")},t.prototype.forSurroundingPoints=function(t,e){var n=this;exports.DIRECTIONS.forEach(function(i){var o=t.addP(r(i));e(i,o,n.getV(o.x,o.y))})},t.prototype.getDirectionOptions=function(t){var e=this,n=this.getClosestRailPoint(t);return exports.DIRECTIONS.filter(function(t){var i=r(t),o=n.addP(i);return!!e.isPathP(o)})},t.prototype.getSafeMove=function(t,e){var n=t.addP(e);if(this.onRail(n))return{safe:!0,newPos:n};var r=t.copy();switch(i(e)){case"left":case"right":r.y=Math.round(r.y),r.x+=e.x;break;case"up":case"down":r.x=Math.round(r.x),r.y+=e.y}return this.onRail(r)?{safe:!0,newPos:r}:{safe:!1}},t}();exports.Level=o;var s=function(){function t(t,e,n){this.pos=t,this.dir=e,this.level=n,this.minMoveDist=.1,this.maxMoveDist=.1}return t.prototype.getClosestRailPoint=function(){return this.level.getClosestRailPoint(this.pos)},t.prototype.nearARailPoint=function(){return this.level.nearARailPoint(this.pos)},Object.defineProperty(t.prototype,"dirV",{get:function(){return r(this.dir)},enumerable:!1,configurable:!0}),t.prototype.getMoveVec=function(t){var n=this.dirV.scale(.005*t);return"right"===this.dir||"left"===this.dir?new e.Pt(l(n.x,this.minMoveDist,this.maxMoveDist),n.y):new e.Pt(n.x,l(n.y,this.minMoveDist,this.maxMoveDist))},t.prototype.railGuide=function(){switch(this.dir){case"left":case"right":this.pos.y=Math.round(this.pos.y);break;case"down":case"up":this.pos.x=Math.round(this.pos.x)}},t}();exports.Agent=s;var a=function(e){function n(t,n,i){var r=e.call(this,t,n,i)||this;return r.mouthOpenPerc=0,r.internalTick=0,r}return t(n,e),n.create=function(t){return new n(t.getLocationsOfChar("p").pop(),"right",t)},n.prototype.tick=function(t,e){if(this.internalTick+=t,this.mouthOpenPerc=.1*Math.abs(Math.sin(.01*this.internalTick)),this.railGuide(),e){this.dir=e;var n=this.getMoveVec(t),i=this.level.getSafeMove(this.pos,n);i.safe&&(this.pos=i.newPos)}},n}(s);exports.Pacman=a;var h=function(n){function i(t,e,i,r,o){var s=n.call(this,t,e,i)||this;return s.color=r,s.scared=o,s}return t(i,n),i.create=function(t,n){return new i(new e.Pt(22,19),"right",t,n,!1)},i.prototype.lastMovedFromHere=function(){return!!this.lastGate&&this.getClosestRailPoint().eq(this.lastGate)},i.prototype.canSeePacman=function(t){var e=this.pos,n=!v(e.y%1,.1,.9),i=!v(e.x%1,.1,.9),r=Math.round(e.y),o=Math.round(e.x);if(n&&r===Math.round(r)&&r===t.y){for(var s=g(t.x,e.x),a=s[0],h=s[1],u=Math.ceil(a);u<=Math.floor(h);u++)if(!this.level.isPath(u,r))return;return t.x===a?"left":"right"}if(i&&o===Math.round(o)&&o===t.x){var c=g(t.y,e.y);for(a=c[0],h=c[1],u=Math.ceil(a);u<=Math.floor(h);u++)if(!this.level.isPath(o,u))return;return t.y===a?"up":"down"}},i.prototype.tick=function(t,e){this.railGuide();var n=this.canSeePacman(e),i=1;if(n)this.dir=n,this.railGuide(),i=1.2;else{var r=this.nearARailPoint();if(r&&(this.pos=this.getClosestRailPoint()),r&&!this.lastMovedFromHere()&&!this.level.onALinearPath(this.pos)){var o=f(this.level.getDirectionOptions(this.pos));o&&(this.dir=o,this.railGuide(),this.lastGate=this.pos.round())}}var s=this.dirV.scale(.005*t*i),a=this.level.getSafeMove(this.pos,s);a.safe?this.pos=a.newPos:this.pos=this.pos.round()},i}(s);exports.Ghost=h;var u=["red","blue","yellow","purple","orange","firebrick"],c={easy:4,medium:5,hard:6},p=function(){function t(t){this.level=t,this.candy=[],this.gameState="not-started",this.pacman=a.create(t),this.ghosts=[]}return t.prototype.startNewGame=function(t){var n=this;this.pacman=a.create(this.level);var i=c[t];this.ghosts=u.slice(0,i).map(function(t){return h.create(n.level,t)}),this.level.forEach(function(t,i,r){t&&" "!==t&&n.candy.push(new e.Pt(i,r))}),this.gameState="playing"},t.prototype.tick=function(t,e,n){var i=this;"playing"===this.gameState&&(this.pacman.tick(t,e),this.ghosts.forEach(function(e){return e.tick(t,i.pacman.pos)}),this.candy=this.candy.filter(function(t){return t.dist(i.pacman.pos)>1}),this.pacmanIsNearGhosts()&&(this.gameState="game-over",null==n||n(this.gameState)),this.getCandyRemaining()<=0&&(this.gameState="you-won",null==n||n(this.gameState)))},t.prototype.pacmanIsNearGhosts=function(){var t=this.pacman.pos;return this.ghosts.some(function(e){return e.pos.dist(t)<1})},t.prototype.getCandyRemaining=function(){return this.candy.length},t}();function l(t,e,n){var i=t<0,r=t;i&&(r=-t);var o=Math.max(Math.min(r,n),e);return i?-o:o}function f(t){if(0!==t.length)return t[Math.floor(Math.random()*t.length)]}function v(t,e,n){return e<=t&&t<=n}function g(t,e){return[Math.min(t,e),Math.max(t,e)]}exports.Game=p;
},{"./pt":"Dpgn"}],"P09d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawArc=exports.drawEllipse=exports.drawEye=exports.drawGhost=exports.drawPacMan=void 0;var r=function(r,a,e){var t=8*e/10,l=a.pos.add(1.5,1.4).scale(e),s=a.mouthOpenPerc,o=a.dirV.getAngle();r.translate(l.x,l.y),r.rotate(o/(180/Math.PI));var i=s*Math.PI*2;r.fillStyle="yellow",r.beginPath(),r.arc(0,0,t,i,i+Math.PI),r.closePath(),r.fill(),r.beginPath(),r.arc(0,0,t,2*Math.PI-i-Math.PI,2*Math.PI-i),r.closePath(),r.fill(),r.beginPath(),r.arc(0,0,t,.25*Math.PI*2,.75*Math.PI*2),r.closePath(),r.fill(),r.resetTransform()};exports.drawPacMan=r;var a=function(r,a,e){var t=16*e/10,l=a.pos.add(.8,.6).scale(e);r.translate(l.x,l.y),r.fillStyle=a.scared?"black":a.color,exports.drawArc(r,0,0,.5*t,180,360),r.beginPath(),r.rect(.5*-t,-1,t,.5*t+1),r.closePath(),r.fill();for(var s=0;s<3;s++)exports.drawArc(r,.5*-t+t/6+t/3*s,.4*t,t/6,0,180);var o=.15*t;r.fillStyle="white",exports.drawEye(r,-.2*t,-.15*t,o,a.dirV),r.fillStyle="white",exports.drawEye(r,.2*t,-.15*t,o,a.dirV),r.resetTransform()};exports.drawGhost=a;var e=function(r,a,e,t,l){r.fillStyle="white",exports.drawEllipse(r,a,e,t,t),r.fillStyle="black";var s=.5*t;exports.drawEllipse(r,a+l.x*s,e+l.y*s,s,s)};exports.drawEye=e;var t=function(r,a,e,t,l){r.beginPath(),r.ellipse(a,e,t,l,0,0,360),r.closePath(),r.fill()};exports.drawEllipse=t;var l=function(r,a,e,t,l,s){var o=2*Math.PI*(1/360);r.beginPath(),r.arc(a,e,t,o*l,o*s),r.closePath(),r.fill()};exports.drawArc=l;
},{}],"QFYJ":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),e=this&&this.__createBinding||(Object.create?function(t,e,o,r){void 0===r&&(r=o),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,r){void 0===r&&(r=o),t[r]=e[o]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&e(r,t,n);return o(r,t),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ButtonControls=exports.KeyboardInstructions=exports.setupKeyboardControls=exports.Controller=void 0;var n=r(require("../l_react")),i=function(){function t(){this.buttons=new Map}return t.prototype.isPressed=function(t){return!!this.buttons.get(t)},t.prototype.reset=function(){this.buttons.clear()},t.prototype.setFromKeyboard=function(e,o){var r=t.keyboardKeyToDir(e);r&&this.setV(r,o)},t.prototype.setV=function(t,e){this.buttons.set(t,e)},t.keyboardKeyToDir=function(t){switch(t){case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";case"ArrowDown":return"down"}},t}();exports.Controller=i;var u=function(t){var e=function(e){t.setFromKeyboard(e.key,!0)};document.body.addEventListener("keydown",e);var o=function(e){t.setFromKeyboard(e.key,!1)};return document.body.addEventListener("keyup",o),function(){document.body.removeEventListener("keydown",e),document.body.removeEventListener("keyup",o)}};exports.setupKeyboardControls=u;var s=function(){return n.Element("div",{style:{fontSize:"24px",display:"grid",justifyContent:"center",gridTemplateColumns:"minmax(auto, 400px)",textAlign:"center"}},["\n            You can use the up, down, left and right arrow keys to move pacman.\n        "])};exports.KeyboardInstructions=s;var a=70,p=function(){return n.Element("div")},c=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.dirToEmoji=new Map([["up","⬆️"],["left","⬅️"],["right","➡️"],["down","⬇️"]]),t}return t(o,e),o.prototype.render=function(){var t=this,e=this.props.controller,o=Array.from(this.dirToEmoji.keys()).map(function(o){var r;return n.Element("button",{onTouchStart:function(t){e.setV(o,!0),t.preventDefault(),t.stopPropagation(),console.log(e.isPressed(o))},onTouchEnd:function(t){e.setV(o,!1),t.preventDefault(),t.stopPropagation()},style:{width:a+"px",height:a+"px",fontSize:"50px",userSelect:"none",borderRadius:"0px",border:"0px solid black",padding:"0",margin:"0",overflow:"hidden"}},[null!==(r=t.dirToEmoji.get(o))&&void 0!==r?r:o])});return n.Element("div",{style:{width:"100%",height:3*a+"px",display:"grid",justifyContent:"center",gridAutoFlow:"row",gridTemplateRows:"repeat(3, "+a+"px)",gridTemplateColumns:"repeat(3, "+a+"px)"}},[n.Element(p),o[0],n.Element(p),o[1],n.Element(p),o[2],n.Element(p),o[3],n.Element(p)])},o}(n.Component);exports.ButtonControls=c;
},{"../l_react":"usdw"}],"cZD6":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GameComponent=void 0;var o=r(require("../l_react")),a=require("./game"),s=require("./pt"),l=require("./render"),c=o.Element,u=require("./game_controls"),p=function(t){function n(e){var n=t.call(this,e)||this;return n.controller=new u.Controller,n.startGame=function(e){n.game.startNewGame(e),n.setState({state:n.game.gameState})},n.pause=function(){n.setGameState("paused")},n.unpause=function(){n.setGameState("playing")},n.restartGame=function(){n.setGameState("not-started")},n.setGameState=function(e){n.game.gameState=e,n.setState({state:e})},n.level=a.Level.createLevel1(),n.game=new a.Game(n.level),n.state={state:n.game.gameState,windowSize:{w:window.innerWidth,h:window.innerHeight}},n}return e(n,t),n.prototype.componentDidMount=function(){var e=this;this.windowResizeListener=function(){var t=window.innerWidth,n=window.innerHeight;t===e.state.windowSize.w&&n===e.state.windowSize.h||e.setState({windowSize:{w:t,h:n}})},window.addEventListener("resize",this.windowResizeListener)},n.prototype.componentDidUnmount=function(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),this.windowResizeListener=void 0)},n.prototype.render=function(){var e=this,t=this.useMobileControls,n=this.gameRenderScaleAndSize,r=n.gameRenderScale,i=n.size;return c("div",{},[c("div",{style:{display:"flex",justifyContent:"space-between",width:i.w+"px",margin:"auto auto"}},[c(d,{g:this.game}),c("button",{style:{display:"playing"===this.state.state?"block":"none"},onClick:function(){"playing"===e.game.gameState&&(e.game.gameState="paused",e.setState({state:"paused"}))}},["pause"])]),c(w,i,[c(y,{level:this.level,N:r}),this.renderGameState()]),t?c(u.ButtonControls,{controller:this.controller}):c(u.KeyboardInstructions)])},Object.defineProperty(n.prototype,"useMobileControls",{get:function(){return this.state.windowSize.w<400},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"gameRenderScaleAndSize",{get:function(){var e=this.state.windowSize,t=Math.min(e.w-16,600),n={w:t,h:t+10};return{gameRenderScale:n.w/(this.level.w+2),size:n}},enumerable:!1,configurable:!0}),n.prototype.renderGameState=function(){var e=this,t=this.gameRenderScaleAndSize.gameRenderScale;switch(this.game.gameState){case"playing":return c(h,{game:this.game,gameRenderScale:t,controller:this.controller,onGameStateChange:function(t){return e.setState({state:t})}},[]);case"not-started":return c(g,{},[c(m,{startGame:this.startGame})]);case"game-over":return c(g,{},[c(f,{restart:this.restartGame,message:"Oh, sorry you lost 😭",buttonText:"Play Again"})]);case"you-won":return c(g,{},[c(f,{restart:this.restartGame,message:"You Won!! 🎉",buttonText:"Play Again"})]);case"paused":return c(g,{},[c(f,{restart:this.unpause,message:"paused",buttonText:"back"})])}},n}(o.Component);exports.GameComponent=p;var d=function(t){function n(e){var n=t.call(this,e)||this;return n.componentDidMount=function(){n.intervalId=setInterval(n.maybeUpdateScore,30)},n.componentDidUnmount=function(){null!=n.intervalId&&clearInterval(n.intervalId),n.intervalId=void 0},n.maybeUpdateScore=function(){var e=n.props.g.getCandyRemaining();e!==n.state.score&&n.setState({score:e})},n.state={score:e.g.getCandyRemaining()},n}return e(n,t),n.prototype.render=function(){return c("div",{},["score: "+this.state.score])},n}(o.Component),h=function(t){function n(e){var n=t.call(this,e)||this;return n.canvasSet=function(e){var t=e.getContext("2d");n.ctx=t},n}return e(n,t),n.prototype.componentDidMount=function(){this.gameLoop(),this.setupEventListeners()},Object.defineProperty(n.prototype,"canvasPixel",{get:function(){return new s.Pt(this.props.game.level.w,this.props.game.level.h)},enumerable:!1,configurable:!0}),n.prototype.componentDidUnmount=function(){var e;null===(e=this.killEventListeners)||void 0===e||e.call(this),this.props.controller.reset(),void 0!==this.animationRequest&&(cancelAnimationFrame(this.animationRequest),this.animationRequest=void 0)},Object.defineProperty(n.prototype,"canvasSize",{get:function(){var e=this.props.gameRenderScale,t=this.props.game.level;return{w:(t.w+1)*e,h:(t.h+1)*e}},enumerable:!1,configurable:!0}),n.prototype.render=function(){var e=this.props.gameRenderScale,t=this.canvasSize;return c("canvas",{ref:this.canvasSet,width:t.w,height:t.h,style:{width:t.w+"px",height:t.h+"px",position:"absolute",zIndex:2,top:.5*e+"px",left:.5*e+"px"}})},n.prototype.setupEventListeners=function(){var e;null===(e=this.killEventListeners)||void 0===e||e.call(this),this.props.controller.reset(),this.killEventListeners=u.setupKeyboardControls(this.props.controller)},n.prototype.getPlayerInputDir=function(){for(var e=0,t=a.DIRECTIONS;e<t.length;e++){var n=t[e];if(this.props.controller.isPressed(n))return n}},n.prototype.gameLoop=function(){var e=this,t=0;this.animationRequest=requestAnimationFrame(function n(r){var i=e.props.gameRenderScale,o=e.ctx,a=e.props.game;if(o){var s=r-t;t=r,a.tick(s,e.getPlayerInputDir(),e.props.onGameStateChange);var c=e.canvasSize;o.clearRect(0,0,c.w,c.h),o.translate(.6*-i,.6*-i),a.candy.forEach(function(e){var t=e.add(1.5,1.5).scale(i);o.fillStyle="pink",l.drawEllipse(o,t.x,t.y,2,2)}),l.drawPacMan(o,a.pacman,i),a.ghosts.forEach(function(e){return l.drawGhost(o,e,i)}),o.resetTransform(),void 0!==e.animationRequest&&(e.animationRequest=requestAnimationFrame(n))}})},n}(o.Component),g=function(e){var t=e.children;return c("div",{style:{width:"100%",height:"100%",backdropFilter:"blur(5px)"}},t)},m=function(e){var t=e.startGame,n=o.useState("easy"),r=n[0],i=n[1],a=function(e){var t=e.d;return c("div",{style:{display:"grid",gridAutoFlow:"column",gridGap:"16px",alignItems:"center",gridTemplateColumns:"200px 1fr"}},[c("label",{style:{fontSize:"20px"}},[t]),c("input",{type:"checkbox",checked:r===t,onChange:function(e){t===r?e.target.checked=!0:i(t)}})])};return c("div",{style:{color:"orange",fontSize:"40px",width:"100%",height:"100%",display:"grid",gridAutoFlow:"row",justifyItems:"center",alignItems:"center",gridGap:"24px",alignContent:"center",gridTemplateRows:"repeat(4, min-content)",background:"rgba(0,0,0,0.5)"}},["start game",c("div",{style:{display:"grid",gridAutoFlow:"row",gridGap:"8px"}},[c(a,{d:"easy"}),c(a,{d:"medium"}),c(a,{d:"hard"})]),c(v,{onClick:function(){return t(r)},label:"Play"})])},f=function(e){var t=e.restart,n=e.message,r=e.buttonText;return c("div",{style:{background:"rgba(0,0,0,0.5)",width:"100%",height:"100%",display:"grid",gridTemplateRows:"min-content min-content",alignContent:"center",justifyContent:"center",gridGap:"16px"}},[c("div",{style:{textAlign:"center",color:"orange",fontSize:"30px"}},[n]),c(v,{onClick:t,label:r})])},v=function(e){var t=e.label,n=e.onClick;return c("button",{style:{fontSize:"40px",width:"100%",maxWidth:"250px",cursor:"pointer"},onClick:n},[t])},w=function(e){var t=e.w,n=e.h,r=e.children;return c("div",{style:{backgroundColor:"lightblue",display:"grid",placeItems:"center",overflow:"hidden",boxSizing:"border-box"}},[c("div",{style:{width:t+"px",height:n+"px",position:"relative"}},r)])};function y(e){for(var t=e.level,n=e.N,r=new s.Pt(n,n),o=[],a=0;a<t.h;a++)for(var l=0;l<t.w;l++)if(t.isPath(l,a)){var u=new s.Pt(l+.5,a+.5).add(-1,-1);o.push(c(b,{top:u.y*n+r.y,left:u.x*n+r.x,width:2*n,height:2*n,color:"black"}))}return c("div",{},i(o))}var b=function(e){var t=e.top,n=e.left,r=e.width,i=e.height,o=e.color;return c("div",{style:{width:r+"px",height:(null!=i?i:r)+"px",position:"absolute",top:t+"px",left:n+"px",backgroundColor:void 0===o?"blue":o}})};
},{"../l_react":"usdw","./game":"NwnZ","./pt":"Dpgn","./render":"P09d","./game_controls":"QFYJ"}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(r,e,o);return n(r,e),r};Object.defineProperty(exports,"__esModule",{value:!0});var o=r(require("./l_react")),i=require("./pacman/index"),u=o.Element,c=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.render=function(){return u("div",{},["Thao"])},n}(o.Component);function a(e){var t=o.useState("red"),n=t[0],r=t[1],i=o.useState("orange"),c=i[0],a=i[1];return u("div",{},[u("div",{style:{color:n}},["Luke"]),u("div",{style:{color:c}},["Lincoln"]),u("button",{onClick:function(){r("red"===n?"blue":"red")}},["change luke"]),u("button",{onClick:function(){a("orange"===c?"purple":"orange")}},["change lincoln"])])}function l(e){return u("div",{},[u(i.GameComponent),u(a),u(c)])}o.RenderDom(u(l),document.body);
},{"./l_react":"usdw","./pacman/index":"cZD6"}]},{},["QCba"], null)
//# sourceMappingURL=dist/game-land.dbd07a8d.js.map